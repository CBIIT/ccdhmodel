<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Data Migration - CRDC-H Model in LinkML documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../css/version-select.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Data Migration";
    var mkdocs_page_input_path = "data-migration.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> CRDC-H Model in LinkML documentation</a>
        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../home/">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Index</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Data Migration</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#approach">Approach</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#migrating-data">Migrating data</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#generalizing-migration-operations">Generalizing migration operations</a>
    </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../credits/">Credits</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">CRDC-H Model in LinkML documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Data Migration</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="migrating-data-between-crdc-h-model-versions">Migrating data between CRDC-H model versions</h1>
<p>As the CRDC-H model evolves with each release, data conforming to one edition of the model will require migration in order to conform to newer editions of the model. As the model evolves, classes may be added or removed from the model, attributes may be added or removed from classes, and the allowed values for particular attributes may change, either relating to other classes in the model or to terminology-bound enumerations.</p>
<h2 id="approach">Approach</h2>
<p>The CRDC-H model is released as a <a href="https://github.com/cancerDHC/ccdhmodel">LinkML document</a>. Using LinkML provides us with a number of automatically generated computable artifacts which directly correspond to the model, allowing us to apply the model in a number of ways, including the following:</p>
<ol>
<li><strong>JSON schema</strong>: validate that a JSON document uses fields and values which are valid according to the model.</li>
<li><strong>ShEx schema</strong>: validate that an RDF dataset uses predicates and values which are valid according to the model.</li>
<li><strong>GraphQL schema</strong>: express a GraphQL application programming interface corresponding to the LinkML model.</li>
<li><strong>OWL ontology</strong>: Description Logic representation of the model.</li>
<li><strong>RDF dataset</strong>: RDF representation of the model which is easily integrated into a broader triplestore.</li>
<li><strong>Python API</strong>: a representation of the model as Python classes and methods.</li>
</ol>
<p>The last artifact, the Python API, is the currently preferred approach for creating transformations from other data formats and schemas into CRDC-H. Using the API directly to construct data objects helps to ensure that the resulting structure will be conformant with the model. We are implementing demonstration use cases in this repository: https://github.com/cancerDHC/example-data</p>
<h2 id="migrating-data">Migrating data</h2>
<p>Because each version of the CRDC-H LinkML model will have a corresponding Python implementation, we envision data migration as consisting of instantiating the Python objects of the newer API from those in the previous API. Ideally, we will provide a Python migration script with each model release, which takes as input a model in the previous model version. Migrations from earlier model versions can be performed as a series of single-version migrations. Migration scripts will need to be aware of which changes are “safe”, vs. which involve possible data loss (e.g., a field has been removed from a class and there is no replacement). Any such operations should be clearly reported in a migration log, particularly when no satisfactory migration could be performed for a data element.</p>
<h2 id="generalizing-migration-operations">Generalizing migration operations</h2>
<p>Since the LinkML infrastructure already provides us with a framework for programmatically interacting with the CRDC-H model, any generalizable issues we need to address in development of migration scripts should be incorporated into LinkML as a framework feature. Any support for these operations that could be incorporated into LinkML itself would help to make the model-specific migration implementations more declarative and more maintainable. As an example, LinkML could provide a standardized means for mapping between successive editions of an enumeration (perhaps it has been decided to use label-based enum values rather than CURIEs), such that it is only required to provide the mapping rather than implement a custom transformation.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../credits/" class="btn btn-neutral float-right" title="Credits">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Index"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../credits/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../js/version-select.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
